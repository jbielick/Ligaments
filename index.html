<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Ligaments by jbielick</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Ligaments</h1>
        <p>Model-View binding for Backbone.js — Bind your bones.</p>

        <p class="view"><a href="https://github.com/jbielick/Ligaments">View the Project on GitHub <small>jbielick/Ligaments</small></a></p>


        <ul>
          <li><a href="https://github.com/jbielick/Ligaments/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/jbielick/Ligaments/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/jbielick/Ligaments">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="backbone-ligaments" class="anchor" href="#backbone-ligaments"><span class="octicon octicon-link"></span></a>Backbone Ligaments</h1>

<p>Declarative data binding between Backbone Models and Views.</p>

<p>Currently in beta.</p>

<h3>
<a name="about" class="anchor" href="#about"><span class="octicon octicon-link"></span></a>About</h3>

<p>Backbone.Ligaments binds DOM Elements to Model Attributes on the <code>name</code> attributes or <code>lg-bind</code> attribute declaration of elements within the view. 
<code>Model.changedAttributes()</code> are injected on each attribute change event. Backbone-Ligament is fully dot-path accessor friendly. You can use this with <code>Backbone.DeepModel</code>
and have full control over injecting, ingesting and binding nested attributes. Any <code>change</code> or <code>input</code> event from an element 
with a <code>name</code> attribute or <code>lg-bind</code> attribute within the bound backbone view instance's element will set the new data to the corresponding bound model attribute 
and fire a <code>change</code> event. The data will be set at the path indicated in the <code>name</code> or <code>lg-bind</code> attribute in dot-notation or bracket-notation.</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"user[Profile][name]"</span><span class="nt">&gt;</span>
or
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">lg-bind=</span><span class="s">"user.Profile.name"</span><span class="nt">&gt;</span>
</pre></div>

<p>When a change event occurs, the ingested data structure will look like this:</p>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="nx">user</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Profile</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">'josh'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</pre></div>

<div class="highlight highlight-html"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"photo[categories][0][name] value="</span><span class="na">r</span><span class="err">/</span><span class="na">awesome</span><span class="err">"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"photo[categories][1][name] value="</span><span class="na">r</span><span class="err">/</span><span class="na">mildlyinteresting</span><span class="err">"</span><span class="nt">&gt;</span>
or  
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">lg-bind=</span><span class="s">"photo.categories.0.name"</span> <span class="na">value=</span><span class="s">"r/awesome"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">lg-bind=</span><span class="s">"photo.categories.1.name"</span> <span class="na">value=</span><span class="s">"r/mildlyinteresting"</span><span class="nt">&gt;</span>
</pre></div>

<p>When a change event occurs, the ingested data structure will look like this:</p>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="nx">photo</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">categories</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">'r/awesome'</span>
    <span class="p">},{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">'r/mildlyinteresting'</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}</span>

</pre></div>

<p>Suppose you want a a number input that keeps it's data type through its journey from the UI to the server. You can use <code>cast</code> option in the <code>bindings</code> options like the below example.</p>

<p>When providing a <code>cast</code> option for an attribute, simply provide a function to be called or an array like so <code>[parseInt, 10]</code> where parseInt is the function to be called, the value of your input will be provided as the first argument and <code>10</code> will be provided as the second argument—the radix. You can define as many constant arguments as you'd like by appending them to the array. </p>

<div class="highlight highlight-html"><pre>with an input like so...
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">lg-bind=</span><span class="s">"preciseMeasurement"</span> <span class="na">value=</span><span class="s">"0.006"</span><span class="nt">&gt;</span>
or
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">step=</span><span class="s">"0.001"</span> <span class="na">lg-bind=</span><span class="s">"preciseMeasurement"</span> <span class="na">value=</span><span class="s">"0.006"</span><span class="nt">&gt;</span>
</pre></div>

<p>A casting function can be provided in the bindings option for that attribute. It can be a custom, anonymous or native // function.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">view</span>     <span class="o">=</span> <span class="k">new</span> <span class="nx">MyViewClass</span><span class="p">(),</span>
    <span class="nx">model</span>    <span class="o">=</span> <span class="k">new</span> <span class="nx">MyModelClass</span><span class="p">(),</span>
    <span class="nx">ligament</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Ligaments</span><span class="p">({</span>
      <span class="nx">model</span><span class="o">:</span> <span class="nx">model</span><span class="p">,</span>
      <span class="nx">view</span><span class="o">:</span> <span class="nx">view</span><span class="p">,</span>
      <span class="nx">bindings</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">'preciseMeasurement'</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">cast</span><span class="o">:</span> <span class="p">[</span><span class="nb">parseFloat</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
      <span class="p">}</span>
     <span class="p">});</span>

</pre></div>

<p>And when the model ingests the value from that input, it will be passed through the cast function to modify it in any way you see fit.</p>

<h3>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage:</h3>

<p>Include the ligaments.js file in your application after backbone.js and before any of your views or models are loaded or required.</p>

<p>To create data binding between a view and a model, construct a new Ligaments instance by calling <code>Backbone.Ligaments(options)</code> method and pass it a object containing your view, model and other options. Currently, there is no way to <del>divorce</del> unbind the view from the model.</p>

<div class="highlight highlight-js"><pre>    <span class="kd">var</span> <span class="nx">viewInstance</span>   <span class="o">=</span> <span class="k">new</span> <span class="nx">MyViewClass</span><span class="p">(),</span>
        <span class="nx">modelInstance</span>  <span class="o">=</span> <span class="k">new</span> <span class="nx">MyModelClass</span><span class="p">(),</span>
        <span class="nx">ligament</span>       <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Ligaments</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span> <span class="nx">modelInstance</span><span class="p">,</span> <span class="nx">view</span><span class="o">:</span> <span class="nx">viewInstance</span><span class="p">});</span>
</pre></div>

<p>All input changes in the view will then be ingested by the model and set to its attributes. 
Similarly the ligament will inject any attributes set on the model programmatically into into the view's bound elements.</p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<h1></h1>

<h3>
<a name="beforeinject-callback" class="anchor" href="#beforeinject-callback"><span class="octicon octicon-link"></span></a>beforeInject callback</h3>

<p>In the example below, a model attribute might look like an ISO datetime string like <code>2014-04-25T01:53:36.998Z</code>. If you wanted this attribute, which is bound to an element in the view, to display this date in a human-friendly fashion, you can use beforeInject to mutate the value before it's injected into the view.</p>

<p>You may need to translate, mask or manipulate values before they are injected into the view. If a beforeInject method exists on the view that is bound, it will be called in the context of your view and provided the model and the hash returned by Backbone.Model.changedAttributes() method.</p>

<p>For example, if your model attribute createdAt stores a datetime string in an ISO/JSON format, but you'd like for it to display as a readable string in your view, check for the changed attribute createdAt in the changedAttributes argument of beforeInject and simply overwrite the value in the changedAttributes hash.</p>

<p>Doing so won't affect your model or Backbone's copy of changed and previous attributes, but will provide Ligaments with a translated value to inject into the view.</p>

<div class="highlight highlight-js"><pre>    <span class="kd">var</span> <span class="nx">ViewClass</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="nx">el</span><span class="o">:</span> <span class="s1">'.appointmentItem'</span><span class="p">,</span>
        <span class="nx">beforeInject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">changed</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">changed</span><span class="p">.</span><span class="nx">createdAt</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">changed</span><span class="p">.</span><span class="nx">createdAt</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">changed</span><span class="p">.</span><span class="nx">createdAt</span><span class="p">)).</span><span class="nx">toLocaleString</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
</pre></div>

<h3>
<a name="selective-bindings" class="anchor" href="#selective-bindings"><span class="octicon octicon-link"></span></a>Selective Bindings</h3>

<p>By default, Backbone.Ligaments will bind all attributes. If you'd like for Backbone.Ligaments to only bind select attributes between your view and model, add an array of attribute names to the binds property of the options hash if you'd like to only bind certain attributes.</p>

<div class="highlight highlight-js"><pre>  <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Ligaments</span><span class="p">({</span>
    <span class="nx">model</span><span class="o">:</span> <span class="nx">UserModel</span><span class="p">,</span>
    <span class="nx">view</span><span class="o">:</span> <span class="nx">UserView</span><span class="p">,</span>
    <span class="nx">bindings</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">first_name</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">last_name</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">phone</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">cast</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'-'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>
</pre></div>

<h3>
<a name="compatibility" class="anchor" href="#compatibility"><span class="octicon octicon-link"></span></a>Compatibility</h3>

<p><code>Backbone.Ligaments</code> has been tested and works with <code>Backbone.DeepModel</code></p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/jbielick">jbielick</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>